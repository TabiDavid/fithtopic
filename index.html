<!DOCTYPE HTML>
<html>

<head>
  <link rel="stylesheet" href="index.css">
</head>
<body>
<h1>Local storage api storing and retrieving simple data, arrays, associative arrays and objects</h1>

<p>Introduce a simple Data and that will be storage in the localstorage even if you refresh the page you can click on the button below to see who was the last person who added
    the name and email.
</p>
    <input type="text" id="email"><p>Write your email</p>
    <input type="text" id="name"><p>Write your name</p>
    <button onclick="store()" type="button">Save</button>

<p>Now see the name and email together</p>
<div id="Show"></div>

<button type="button" onclick="retrayData()">Press here</button>

<h2>Now let`s create some array and associative arrays and we will save it into the localStorage</h2>
<p>Please fill those blank boxes</p>
    <form>
       
            <p>What is your Name</p>
            <input type="text" id="title">
       
            <p>Where do you live?</p>
            <input type="text" id="city">

            <p>Where are you from?</p>
            <input type="text" id="country">

            <p>How old are you?</p>
            <input type="text" id="age">

            <p>Click the button below and you will see all those datas in string, add as many people you want.</p>
            <button id="button">Click to Add</button>
        

        <div id="arrays">
            <pre></pre>
        </div>
    </form>

<p>After that exercise now we will convert that Associative array in a JSON Object, later them will be printing as a Object.</p>

<p>Press the button to see what happen with all the information that you have saved in the localstorage</p>

<button type="button" onclick="Data()">Press here</button>
<div id="outPut"></div>

<div id="demo"></div>

    <script>

function store(){

var inputEmail= document.getElementById("email");
var name = document.getElementById("name");
localStorage.setItem("email", inputEmail.value);
localStorage.setItem("name", name.value);
}

function retrayData(){

  
  document.getElementById("Show").innerHTML = "NAME: " + localStorage.getItem("name")+ "<br>" + "EMAIL: " + localStorage.getItem("email");
}

        let people = [];
        
        const addPerson = (ev)=>{
            ev.preventDefault();
            let person = {
                Name: document.getElementById("title").value,
                City: document.getElementById("city").value,
                Country: document.getElementById("country").value,
                age: document.getElementById("age").value,
            }
            people.push(person);
            document.forms[0].reset(); 

            let pre = document.querySelector('#arrays pre');
            pre.textContent = '\n' + JSON.stringify(people, '\t', 2);

            localStorage.setItem('PeopleList', JSON.stringify(people) );
          }
            document.getElementById('button').addEventListener('click', addPerson);

//Convert the People list in a JSON parse//

function Data(){

  var newone = localStorage.getItem("PeopleList");
  
  var one = JSON.parse(newone);


  var i, j, x = " ";

  for (i = 0; i < one.length; i++) {

  x += "<h2>" + one[i].Name + "</h2>" + "<br>" + "Age: " + one[i].age + "<br>" + "City: " + one[i].City + "<br>" + "Country: " + one[i].Country;

  
}

document.getElementById("outPut").innerHTML = x;
}


    </script>

</body>

</html>